/*!
  
  --> Java script to extend the wp Customizer Panel And Section

  --> File: customizer-panels-sections.js
*/

!function (e) { var t = wp.customize; t.bind("pane-contents-reflowed", function () { var n = []; t.section.each(function (e) { "pe_section" === e.params.type && void 0 !== e.params.section && n.push(e) }), n.sort(t.utils.prioritySort).reverse(), e.each(n, function (t, n) { e("#sub-accordion-section-" + n.params.section).children(".section-meta").after(n.headContainer) }); var a = []; t.panel.each(function (e) { "pe_panel" === e.params.type && void 0 !== e.params.panel && a.push(e) }), a.sort(t.utils.prioritySort).reverse(), e.each(a, function (t, n) { e("#sub-accordion-panel-" + n.params.panel).children(".panel-meta").after(n.headContainer) }) }); var n = wp.customize.Panel.prototype.embed, a = wp.customize.Panel.prototype.isContextuallyActive, i = wp.customize.Panel.prototype.attachEvents; wp.customize.Panel = wp.customize.Panel.extend({ attachEvents: function () { if ("pe_panel" === this.params.type && void 0 !== this.params.panel) { i.call(this); var e = this; e.expanded.bind(function (n) { var a = t.panel(e.params.panel); n ? a.contentContainer.addClass("current-panel-parent") : a.contentContainer.removeClass("current-panel-parent") }), e.container.find(".customize-panel-back").off("click keydown").on("click keydown", function (n) { t.utils.isKeydownButNotEnterEvent(n) || (n.preventDefault(), e.expanded() && t.panel(e.params.panel).expand()) }) } else i.call(this) }, embed: function () { if ("pe_panel" === this.params.type && void 0 !== this.params.panel) { n.call(this); e("#sub-accordion-panel-" + this.params.panel).append(this.headContainer) } else n.call(this) }, isContextuallyActive: function () { if ("pe_panel" !== this.params.type) return a.call(this); var e = this, n = this._children("panel", "section"); t.panel.each(function (t) { t.params.panel && t.params.panel === e.id && n.push(t) }), n.sort(t.utils.prioritySort); var i = 0; return _(n).each(function (e) { e.active() && e.isContextuallyActive() && (i += 1) }), 0 !== i } }); var o = wp.customize.Section.prototype.embed, s = wp.customize.Section.prototype.isContextuallyActive, c = wp.customize.Section.prototype.attachEvents; wp.customize.Section = wp.customize.Section.extend({ attachEvents: function () { if ("pe_section" === this.params.type && void 0 !== this.params.section) { c.call(this); var e = this; e.expanded.bind(function (n) { var a = t.section(e.params.section); n ? a.contentContainer.addClass("current-section-parent") : a.contentContainer.removeClass("current-section-parent") }), e.container.find(".customize-section-back").off("click keydown").on("click keydown", function (n) { t.utils.isKeydownButNotEnterEvent(n) || (n.preventDefault(), e.expanded() && t.section(e.params.section).expand()) }) } else c.call(this) }, embed: function () { if ("pe_section" === this.params.type && void 0 !== this.params.section) { o.call(this); e("#sub-accordion-section-" + this.params.section).append(this.headContainer) } else o.call(this) }, isContextuallyActive: function () { if ("pe_section" !== this.params.type) return s.call(this); var e = this, n = this._children("section", "control"); t.section.each(function (t) { t.params.section && t.params.section === e.id && n.push(t) }), n.sort(t.utils.prioritySort); var a = 0; return _(n).each(function (e) { void 0 !== e.isContextuallyActive ? e.active() && e.isContextuallyActive() && (a += 1) : e.active() && (a += 1) }), 0 !== a } }) }(jQuery);